# Итеративный план разработки виртуальной ЭВМ на Rust

## Этап 1: Основная структура
- [ ] **Определение структур**:
  - [ ] Создать структуру для `Register`, `Memory`, `ALU`, и `Control Unit`.

## Этап 2: Регистры
- [ ] **Регистры**:
  - [ ] Реализовать регистры общего назначения.
  - [ ] Реализовать специальные регистры (`Program Counter`, `Stack Pointer`, `Status Register`).

## Этап 3: Память
- [ ] **Память**:
  - [ ] Создать вектор для симуляции оперативной памяти.
  - [ ] Реализовать методы для чтения и записи в память.

## Этап 4: Ввод-вывод
- [ ] **Port-mapped I/O**:
  - [ ] Реализовать структуру `IoPorts` для симуляции портов ввода-вывода.

## Этап 5: Простейший исполнительный цикл
- [ ] **Исполнительный цикл**:
  - [ ] Реализовать базовую логику цикла обработки инструкций без декодирования (только `fetch` и `execute` для простейших операций).

## Этап 6: Набор инструкций
- [ ] **Набор инструкций**:
  - [ ] Определить базовый набор инструкций (например, `NOP`, `LOAD`, `STORE`, `ADD`, `JUMP`).
  - [ ] Реализовать исполнение этих инструкций.

## Этап 7: Арифметико-логическое устройство (ALU)
- [ ] **ALU**:
  - [ ] Реализовать логику для выполнения арифметических операций.
  - [ ] Реализовать логику для выполнения логических операций.

## Этап 8: Декодирование команд
- [ ] **Декодирование команд**:
  - [ ] Добавить декодирование операций (`decode`) на основе опкода.

## Этап 9: Комплексное исполнение
- [ ] **Комплексное исполнение**:
  - [ ] Интегрировать `fetch`, `decode` и `execute` в полноценный цикл.

## Этап 10: Кэш-память
- [ ] **Кэш-память**:
  - [ ] Реализовать простую модель кэширования данных.

## Этап 11: Тестирование компонентов
- [ ] **Тестирование**:
  - [ ] Написать unit-тесты для каждого компонента.
  - [ ] Написать интеграционные тесты для проверки взаимодействия компонентов.

## Этап 12: Ввод-вывод как поток токенов
- [ ] **Stream I/O**:
  - [ ] Реализовать механизм потокового ввода-вывода на основе `IoPorts`.

## Этап 13: Управляющий блок (Control Unit)
- [ ] **Control Unit**:
  - [ ] Реализовать логику управления потоком выполнения команд.

## Этап 14: CLI и интерфейс пользователя
- [ ] **Интерфейс пользователя**:
  - [ ] Создать CLI для взаимодействия с ЭВМ (загрузка программы, ввод данных, выполнение).

## Этап 15: Журналирование и отладка
- [ ] **Логирование**:
  - [ ] Разработать механизм логирования работы ЭВМ для анализа и отладки.

## Этап 16: Документация и отчёт
- [ ] **Документация**:
  - [ ] Документировать архитектуру и компоненты ЭВМ.
  - [ ] Подготовить отчет о разработке.

После каждого этапа проверять выполнение задачи и переходить к следующей. В случае возникновения ошибок или проблем, возвращаться к предыдущим шагам для их устранения.
